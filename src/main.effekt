module main // must be named same as the file!

import src/lib/ppm
import src/lib/vec3
import src/lib/ray
import src/lib/camera

import io/error

def main(): Unit = {
  with on[IOError].panic
  
  val sphere1 = Sphere(Vec3(0.0, 0.0, -1.0), 0.5)
  val sphere2 = Sphere(Vec3(0.0, -100.5, -1.0), 100.0)
  val world = [hittable(sphere1), hittable(sphere2)]

  val camera = camera(400, 16.0 / 9.0, 10)
  camera.render { r => ray::hittables(world, r) }.writeToFile("out.ppm")

  ()
}
